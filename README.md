[![Chrome Web Store Users](https://img.shields.io/chrome-web-store/users/abpbiefojfkekhkjnpakpekkpeibnjej?logo=google&logoColor=white&label=google%20users)](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej)
[![Mozilla Add-on Users](https://img.shields.io/amo/users/django-files?logo=mozilla&label=mozilla%20users)](https://addons.mozilla.org/addon/django-files)
[![Chrome Web Store Version](https://img.shields.io/chrome-web-store/v/abpbiefojfkekhkjnpakpekkpeibnjej?label=chrome&logo=googlechrome)](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej)
[![Mozilla Add-on Version](https://img.shields.io/amo/v/django-files?label=firefox&logo=firefox)](https://addons.mozilla.org/addon/django-files)
[![GitHub Release Version](https://img.shields.io/github/v/release/django-files/web-extension?logo=github)](https://github.com/django-files/web-extension/releases/latest)
[![Build](https://img.shields.io/github/actions/workflow/status/django-files/web-extension/build.yaml?logo=github&label=build)](https://github.com/django-files/web-extension/actions/workflows/build.yaml)
[![Test](https://img.shields.io/github/actions/workflow/status/django-files/web-extension/test.yaml?logo=github&label=test)](https://github.com/django-files/web-extension/actions/workflows/test.yaml)
[![Codacy Badge](https://app.codacy.com/project/badge/Grade/7842944ada6b4c7ebb4f9dc83ed6a654)](https://app.codacy.com/gh/django-files/web-extension/dashboard?utm_source=gh&utm_medium=referral&utm_content=&utm_campaign=Badge_grade)
[![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=django-files_web-extension&metric=alert_status)](https://sonarcloud.io/summary/new_code?id=django-files_web-extension)
[![GitHub Last Commit](https://img.shields.io/github/last-commit/django-files/web-extension?logo=github&label=updated)](https://github.com/django-files/web-extension/graphs/commit-activity)
[![GitHub Top Language](https://img.shields.io/github/languages/top/django-files/web-extension?logo=htmx&logoColor=white)](https://github.com/django-files/web-extension)
[![GitHub Repo Size](https://img.shields.io/github/repo-size/django-files/web-extension?logo=bookstack&logoColor=white&label=repo%20size)](https://github.com/django-files/web-extension)
[![GitHub Org Stars](https://img.shields.io/github/stars/django-files?style=flat&logo=github&label=org%20stars)](https://cssnr.github.io/)
[![Discord](https://img.shields.io/discord/899171661457293343?logo=discord&logoColor=white&label=discord&color=7289da)](https://discord.gg/wXy6m2X8wY)

# Django Files Web Extension

[Chrome](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej) Web Extension and
[Firefox](https://addons.mozilla.org/addon/django-files) Browser Addon for
[Django Files](https://github.com/django-files/django-files) to view recent uploads, shorten URLs,
and upload any Image, Video or Audio files with right click.

> [!IMPORTANT]  
> This Web Extension is designed to work with [Django Files](https://github.com/django-files/django-files).

## Table of Contents

- [Install](#install)
- [Features](#features)
- [Configure](#configure)
- [Setup](#setup)
- [Support](#support)
- [Building](#building)
- [Development](#development)

# Install

- [Google Chrome Web Store](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej)
- [Mozilla Firefox Add-ons](https://addons.mozilla.org/addon/django-files)

[![Chrome](https://raw.githubusercontent.com/smashedr/logo-icons/master/browsers/chrome_48.png)](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej)
[![Firefox](https://raw.githubusercontent.com/smashedr/logo-icons/master/browsers/firefox_48.png)](https://addons.mozilla.org/addon/django-files)
[![Edge](https://raw.githubusercontent.com/smashedr/logo-icons/master/browsers/edge_48.png)](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej)
[![Chromium](https://raw.githubusercontent.com/smashedr/logo-icons/master/browsers/chromium_48.png)](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej)
[![Brave](https://raw.githubusercontent.com/smashedr/logo-icons/master/browsers/brave_48.png)](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej)
[![Opera](https://raw.githubusercontent.com/smashedr/logo-icons/master/browsers/opera_48.png)](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej)
[![Kiwi](https://raw.githubusercontent.com/smashedr/logo-icons/master/browsers/kiwi_48.png)](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej)

All Chromium Based Browsers can install the extension from the
[Chrome Web Store](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej).

Mobile browser support available for
[Firefox](https://addons.mozilla.org/addon/django-files) and
[Kiwi](https://chromewebstore.google.com/detail/django-files/abpbiefojfkekhkjnpakpekkpeibnjej).

## Features

- View Recent Uploads on Popup
- Preview Popup Images on Hover.
- Set Private, Password, and Expiration.
- Customize Popup Icons, Width and Number of Files.
- Right Click any Image, Video, or Audio to Upload.
- Upload Directly to Albums with Context Menu.
- Right Click any URL to Shorten.
- Automatically Authenticate with Django Files.
- Automatic Dark/Light Mode based on Browser Settings.

> [!TIP]  
> **Don't see your feature here?**
> Request one on the [Feature Request Discussion](https://github.com/django-files/web-extension/discussions/categories/feature-requests).

## Configure

You can pin the Addon by clicking the `Puzzle Piece`, find the `Django Files icon`, then;  
**Firefox**, click the `Settings Wheel` and `Pin to Toolbar`.  
**Chrome**, click the `Pin` icon.

More Information on the Website: [https://django-files.github.io/extension/](https://django-files.github.io/extension/#configure)

## Setup

To automatically configure the web extension to work with your Django Files instance do the following:

- Log in to your Django Files Instance
- Click the Popup Icon (from above)
- Click `Add Auth from Current Site`

The addon should now be configured to work with your Django Files instance.

You can now click the Django Files icon to view your recent uploads or open Options.  
Right-click on any Image, Video, Audio, or URL upload to Django Files or Shorten URL.

Alternatively, you can open the Options page and add your URL and Token.

# Support

For help using the web extension, utilize any these resources:

- Documentation: https://django-files.github.io/extension/
- Q&A Discussion: https://github.com/django-files/web-extension/discussions/categories/q-a
- Request a Feature: https://github.com/django-files/web-extension/discussions/categories/feature-requests

If you are experiencing an issue/bug or getting unexpected results, use:

- Report an Issue: https://github.com/django-files/web-extension/issues
- Chat with us on Discord: https://discord.gg/wXy6m2X8wY
- Provide Anonymous Feedback: [https://cssnr.github.io/feedback](https://cssnr.github.io/feedback?app=Django%20Files%20Extension)

Logs can be found inspecting the page (Ctrl+Shift+I), clicking on the Console, and;
Firefox: toggling Debug logs, Chrome: toggling Verbose from levels dropdown.

Note: When providing anonymous feedback there is no way to follow up and get more information unless you provide a contact method.

# Development

**Quick Start**

First, clone (or download) this repository and change into the directory:

```shell
git clone https://github.com/django-files/web-extension.git
cd web-extension
```

Second, install the dependencies:

```shell
npm install
```

Finally, to run Chrome or Firefox with web-ext, run one of the following:

```shell
npm run chrome
npm run firefox
```

Additionally, to Load Unpacked/Temporary Add-on make a `manifest.json` and run from the [src](src) folder, run one of the following:

```shell
npm run manifest:chrome
npm run manifest:firefox
```

Chrome: [https://developer.chrome.com/docs/extensions/get-started/tutorial/hello-world#load-unpacked](https://developer.chrome.com/docs/extensions/get-started/tutorial/hello-world#load-unpacked)  
Firefox: [https://extensionworkshop.com/documentation/develop/temporary-installation-in-firefox/](https://extensionworkshop.com/documentation/develop/temporary-installation-in-firefox/)

For more information on web-ext, [read this documentation](https://extensionworkshop.com/documentation/develop/web-ext-command-reference/).  
To pass additional arguments to an `npm run` command, use `--`.  
Example: `npm run chrome -- --chromium-binary=...`

## Building

Install the requirements and copy libraries into the `src/dist` directory by running `npm install`.
See [gulpfile.js](gulpfile.js) for more information on `postinstall`.

```shell
npm install
```

To create a `.zip` archive of the [src](src) directory for the desired browser run one of the following:

```shell
npm run build
npm run build:chrome
npm run build:firefox
```

For more information on building, see the scripts section in the [package.json](package.json) file.

## Chrome Setup

1.  Build or Download a [Release](https://github.com/django-files/web-extension/releases).
1.  Unzip the archive, place the folder where it must remain and note its location for later.
1.  Open Chrome, click the `3 dots` in the top right, click `Extensions`, click `Manage Extensions`.
1.  In the top right, click `Developer Mode` then on the top left click `Load unpacked`.
1.  Navigate to the folder you extracted in step #3 then click `Select Folder`.

## Firefox Setup

1.  Build or Download a [Release](https://github.com/django-files/web-extension/releases).
1.  Unzip the archive, place the folder where it must remain and note its location for later.
1.  Go to `about:debugging#/runtime/this-firefox` and click `Load Temporary Add-on...`
1.  Navigate to the folder you extracted earlier, select `manifest.json` then click `Select File`.
1.  Optional: open `about:config` search for `extensions.webextensions.keepStorageOnUninstall` and set to `true`.

If you need to test a restart, you must pack the addon. This only works in ESR, Development, or Nightly.
You may also use an Unbranded Build: [https://wiki.mozilla.org/Add-ons/Extension_Signing#Unbranded_Builds](https://wiki.mozilla.org/Add-ons/Extension_Signing#Unbranded_Builds)

1.  Run `npm run build:firefox` then use `web-ext-artifacts/{name}-firefox-{version}.zip`.
1.  Open `about:config` search for `xpinstall.signatures.required` and set to `false`.
1.  Open `about:addons` and drag the zip file to the page or choose Install from File from the Settings wheel.
